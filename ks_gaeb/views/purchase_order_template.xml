<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <template id="x81_purchase_order_template">
        <GAEB xmlns="http://www.gaeb.de/GAEB_DA_XML/DA81/3.2">
            <GAEBInfo>
                <Version>3.2</Version>
                <VersDate>2013-10</VersDate>
                <Date t-esc="date"/>
                <Time t-esc="time.strftime('%H:%M:%S')"/>
                <ProgSystem>/ GXML Toolbox V3.2 R20190425</ProgSystem>
                <ProgName>Odoo ERP</ProgName>
            </GAEBInfo>
            <PrjInfo>
                <NamePrj t-esc="order.project_id.name"/>
                <LblPrj t-esc="order.project_id.name or order.name"/>
                <Cur t-esc="order.currency_id.symbol"/>
                <CurLbl t-esc="order.currency_id.name"/>
            </PrjInfo>
            <Award>
                <DP>81</DP>
                <AwardInfo>
                    <BidDate t-esc="order.date_order"/>
                </AwardInfo>
                <OWN>
                    <Address>
                        <Name1 t-esc="order.partner_id.name"/>
                        <Street t-esc="order.partner_id.street"/>
                        <PCode t-esc="order.partner_id.zip"/>
                        <City t-esc="order.partner_id.city"/>
                        <Country t-esc="order.partner_id.country_id.name"/>
                    </Address>
                </OWN>
                <CTR>
                    <Address>
                        <Name1 t-esc="order.partner_id.name"/>
                        <Street t-esc="order.partner_id.street"/>
                        <PCode t-esc="order.partner_id.zip"/>
                        <City t-esc="order.partner_id.city"/>
                        <Country t-esc="order.partner_id.country_id.name"/>
                    </Address>
                </CTR>
                <BoQ>
                    <BoQInfo>
                        <Name>Angebot</Name>
                        <LblBoQ>VAT</LblBoQ>
                        <OutlCompl>AllTxt</OutlCompl>
                        <BoQBkdn>
                            <Type>BoQLevel</Type>
                            <LblBoQBkdn>Titel</LblBoQBkdn>
                            <Length>1</Length>
                            <Num>Yes</Num>
                        </BoQBkdn>
                        <BoQBkdn>
                            <Type>Item</Type>
                            <LblBoQBkdn>Position</LblBoQBkdn>
                            <Length>2</Length>
                            <Num>No</Num>
                            <Alignment>left</Alignment>
                        </BoQBkdn>
                    </BoQInfo>
                    <BoQBody>
                        <Remark>
                            <Description>
                                <CompleteText>
                                    <DetailTxt>
                                        <Text>
                                            <p style="text-indent:0pt;margin-top:0pt;margin-bottom:0pt;font-family:&#x27;Klavika Basic&#x27;;font-size:10pt;">
                                                <span>Sehr geehrte Damen und Herren,</span>
                                            </p>
                                            <p style="text-indent:0pt;margin-top:0pt;margin-bottom:0pt;font-family:&#x27;Klavika Basic&#x27;;font-size:10pt;">
                                                <span></span>
                                            </p>
                                            <p style="text-indent:0pt;margin-top:0pt;margin-bottom:0pt;font-family:&#x27;Klavika Basic&#x27;;font-size:10pt;">
                                                <span>wir danken Ihnen für Ihre Anfrage und bieten nachstehend an:
                                                </span>
                                            </p>
                                        </Text>
                                    </DetailTxt>
                                    <OutlineText>
                                        <OutlTxt>
                                            <TextOutlTxt>
                                                <span>automatik: Kopf (NACH)</span>
                                            </TextOutlTxt>
                                        </OutlTxt>
                                    </OutlineText>
                                </CompleteText>
                            </Description>
                        </Remark>
                        <BoQCtgy>
                            <LblTx>
                                <span>Vorbereitende Arbeiten</span>
                            </LblTx>
                            <BoQBody>
                                <Itemlist>
                                    <Remark>
                                        <Description>
                                            <CompleteText>
                                                <DetailTxt>
                                                    <Text>
                                                        <p style="text-indent:0pt;margin-top:0pt;margin-bottom:0pt;font-family:&#x27;Klavika Basic&#x27;;font-size:10pt;">
                                                            <span>Gerüststellung</span>
                                                        </p>
                                                        <p style="text-indent:0pt;margin-top:0pt;margin-bottom:0pt;font-family:&#x27;Klavika Basic&#x27;;font-size:10pt;">
                                                            <span>Das Angebot für die Gerüststellung liegt von der Fa.
                                                                KOLB &#x26; KERN Gerüstbau GmbH bei.
                                                            </span>
                                                        </p>
                                                        <p style="text-indent:0pt;margin-top:0pt;margin-bottom:0pt;font-family:&#x27;Klavika Basic&#x27;;font-size:10pt;">
                                                            <span>Da es sich hier um eine rechtlich selbstständige Firma
                                                                handelt, haben Sie dadurch einen Kostenvorteil.
                                                            </span>
                                                        </p>
                                                        <p style="text-indent:0pt;margin-top:0pt;margin-bottom:0pt;font-family:&#x27;Klavika Basic&#x27;;font-size:10pt;">
                                                            <span>Die Abwicklung läuft hierbei über uns, so dass Sie
                                                                dadurch keine zusätzliche Belastung haben.
                                                            </span>
                                                        </p>
                                                    </Text>
                                                </DetailTxt>
                                                <OutlineText>
                                                    <OutlTxt>
                                                        <TextOutlTxt>
                                                            <span>Gerüstangebot</span>
                                                        </TextOutlTxt>
                                                    </OutlTxt>
                                                </OutlineText>
                                            </CompleteText>
                                        </Description>
                                    </Remark>
                                    <t t-set="index" t-value="0"/>
                                    <t t-foreach="order.order_line" t-as="line">
                                        <t t-set="index" t-value="index + 1"/>
                                        <Item t-att-ID="'item-%s' % line.id" t-att-RNoPart="'%02d' % index">
                                            <Qty t-esc="line.product_uom_qty"/>
                                            <QU t-esc="line.product_uom.name"/>
                                            <UP t-esc="line.price_unit"/>
                                            <IT t-esc="line.price_total"/>
                                            <Description>
                                                <CompleteText>
                                                    <DetailTxt>
                                                        <Text>
                                                            <p>
                                                                <span t-esc="line.name"/>
                                                            </p>
                                                        </Text>
                                                    </DetailTxt>
                                                    <OutlineText>
                                                        <OutlTxt>
                                                            <TextOutlTxt/>
                                                        </OutlTxt>
                                                    </OutlineText>
                                                </CompleteText>
                                            </Description>
                                        </Item>
                                    </t>
                                </Itemlist>
                            </BoQBody>
                            <Totals>
                                <Total t-esc="order.amount_total"/>
                            </Totals>
                        </BoQCtgy>
                    </BoQBody>
                </BoQ>
            </Award>
        </GAEB>
    </template>
    <template id="gaeb_d81_purchase_template">
     <t t-set="line_no" t-value="1"/>
        <t t-set="lines" t-value="[]"/>

        <t t-set="lines" t-value="lines + [('00', '             81L                                  1PP00000090')]"/>
        <t t-set="lines" t-value="lines + [('01', 'VAT')]"/>
        <t t-set="lines" t-value="lines + [('02', order.name)]"/>
        <t t-set="lines" t-value="lines + [('03', order.partner_id.name or '')]"/>

<!--        <t t-foreach="(order.partner_id.contact_address or '').split('\n')" t-as="line">-->
<!--            <t t-set="lines" t-value="lines + [('04', line.strip())]"/>-->
<!--        </t>-->

        <t t-set="lines" t-value="lines + [('08', order.currency_id.name + '   ' + order.currency_id.name)]"/>
        <t t-set="lines" t-value="lines + [('20', '')]"/>
        <t t-set="lines" t-value="lines + [('26', '   Sehr geehrte Damen und Herren,')]"/>
        <t t-set="lines" t-value="lines + [('26', '')]"/>
        <t t-set="lines" t-value="lines + [('26', '   wir danken Ihnen für Ihre Anfrage und bieten nachstehen')]"/>
        <t t-set="lines" t-value="lines + [('26', '   d an:')]"/>
        <t t-set="lines" t-value="lines + [('111', '        N    Titel')]"/>
        <t t-set="lines" t-value="lines + [('12', 'Vorbereitende Arbeiten')]"/>
        <t t-set="lines" t-value="lines + [('20', '')]"/>
        <t t-set="counter" t-value="0"/>
        <t t-foreach="order.order_line" t-as="ol">
            <t t-set="desc"
               t-value="'        P    ' + ol.product_id.display_name[:40] + ' Qty: ' + '%.2f' % ol.product_uom_qty + ' Price: ' + '%.2f' % ol.price_unit"/>
            <t t-set="lines" t-value="lines + [('26','   ' + ol.product_id.display_name)]"/>
            <t t-set="lines" t-value="lines + [('26','   ' + ol.product_description)]"/>
<!--            <t t-set="lines" t-value="lines + [('21101', '   ' + '%.2f' % ol.product_uom_qty +'' + ol.product_uom.name)]"/>-->
            <t t-set="code" t-value="'%05d' % (21101 + counter)"/>
            <t t-set="line_text"
   t-value="'   ' + ( 'NNN ' if ol.product_id.to_be_printed_on_pdf else 'NEN ' ) + '%.2f' % ol.product_uom_qty + ' ' + ol.product_uom.name"/>
            <t t-set="lines" t-value="lines + [(code, line_text)]"/>
             <t t-set="counter" t-value="counter + 1"/>
            <t t-set="lines" t-value="lines + [('25', '')]"/>
        </t>

        <t t-set="lines" t-value="lines + [('26', '    Material-, Geräte- und Entsorgungskostenanteil beträgt')]"/>
        <t t-set="lines" t-value="lines + [('26', '    35(Unknown) % (auf die Tagelohnstunden)')]"/>
        <t t-set="lines" t-value="lines + [('26', '')]"/>
        <t t-set="lines" t-value="lines + [('26', '    Dieses Angebot ist freibleibend. Sofern Sie den Auftrag')]"/>
        <t t-set="lines" t-value="lines + [('26', '    an uns erteilen möchten, senden Sie uns bitte eine Kop')]"/>
        <t t-set="lines" t-value="lines + [('26', '    ie unseres Angebotes unterschrieben per Fax: 06021/8591-22')]"/>
        <t t-set="lines" t-value="lines + [('26', '    bzw. maler@kolb-kern.de oder per Post zurück.')]"/>
        <t t-set="lines" t-value="lines + [('26', '')]"/>
        <t t-set="lines" t-value="lines + [('26', '    Bitte überprüfen Sie die uns vorliegenden Daten Ihrer Anschrift')]"/>
        <t t-set="lines" t-value="lines + [('26', '    und teilen Sie uns evtl. Korrekturen für die Rechnungsstellung')]"/>
        <t t-set="lines" t-value="lines + [('26', '    möglichst zeitnah mit.')]"/>
        <t t-set="lines" t-value="lines + [('26', '')]"/>
        <t t-set="lines" t-value="lines + [('26', '    Über Ihren Auftrag würden wir uns sehr freuen. Danke!')]"/>
        <t t-set="lines" t-value="lines + [('26', '')]"/>
        <t t-set="lines" t-value="lines + [('26', '')]"/>
        <t t-set="lines" t-value="lines + [('26', '')]"/>
        <t t-set="lines" t-value="lines + [('26', '')]"/>
        <t t-set="lines" t-value="lines + [('26', '    Ort, Datum\t\tRechtsverbindliche Unterschrift (optional')]"/>
        <t t-set="lines" t-value="lines + [('26', '     Firmenstempel)')]"/>
       <t t-set="lines" t-value="lines + [('26', '    ' +order.date_approve.strftime('%d.%m.%Y') if order.date_approve else '')]"/>
       <t t-set="lines" t-value="lines + [('312', '')]"/>


        <t t-set="output" t-value="[]"/>
        <t t-foreach="enumerate(lines, start=1)" t-as="pair">
            <t t-set="code" t-value="pair[1][0]"/>
            <t t-set="text" t-value="pair[1][1]"/>
            <t t-set="line_num" t-value="str(pair[0]).zfill(6)"/>
            <t t-set="output" t-value="output + [(code + text).ljust(74) + line_num]"/>
        </t>
        <t t-set="output" t-value="output + [('99' + '    ').ljust(74) + '00028'+line_num]"/>

        <t t-esc="'\n'.join(output)"/>
    </template>
</odoo>
